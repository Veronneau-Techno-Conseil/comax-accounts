@model CommunAxiom.Accounts.ViewModels.Network.ManageViewModel
@{
    ViewData["Title"] = "Manage Network";
}

<div class="columns is-variable is-5">
    <div class="column is-3">
        <div class="columns">
            <div class="column is-12">
                <div class="card has-background-white">
                    <div class="card-content">
                        <table class="table is-hoverable">
                            <thead>
                                <tr>
                                    <th colspan="2"><h5>My Network</h5></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="min-width:3rem; width: 3rem;">
                                        <img class="image icon" src="~/Images/Contacts.png" />
                                    </td>
                                    <td>
                                        @Html.ActionLink("Contacts","Contacts")
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <img class="image icon" src="~/Images/Groups.png" />
                                    </td>
                                    <td>
                                        @Html.ActionLink("Groups","Groups")
                                    </td>
                                </tr>
                                <tr>
                                    <td>

                                        <img class="image icon" src="~/Images/Groups.png" />

                                    </td>
                                    <td>
                                        @Html.ActionLink("Requests","Requests")
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="column is-9">
        <div class="columns">
            <div class="column is-12">
                <div class="card has-background-white">
                    <div class="card-content">
                        <div class="columns is-gapless">
                            <div class="column is-11 has-background-white">
                                <div class="has-background-white">
                                    @if (Model.ContactRequests.Count() == 1)
                                    {
                                        <label class="label">You have @Model.ContactRequests.Count() prending request</label>
                                    }
                                    else
                                    {
                                        <label class="label">You have @Model.ContactRequests.Count() prending requests</label>
                                    }
                                </div>
                            </div>
                            <div class="column is-1">
                                <div class="has-background-white">
                                    @Html.ActionLink("Manage","Requests")
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="columns">
            <div class="column is-12">
                <div class="card has-background-white">
                    <div class="card-content">
                        <div class="columns">
                            <div class="column is-12">
                                <h5>Contacts</h5>
                            </div>
                        </div>
                        @{
                            var contactsArray = Model.Contacts.ToArray();
                            double count = contactsArray.Count();

                            if (count == 100)
                            {
                                <div class="columns">
                                    <div class="column is-12">
                                        no contacts to display
                                    </div>
                                </div>
                            }
                            else
                            {
                                int contactCount = 0;
                                var rowCount = Math.Round((double)(count / 3), (int)0, MidpointRounding.ToPositiveInfinity);
                                @for (int i = 0; i < rowCount; i++)
                                {
                                    var divCount = contactCount + 3;
                                    <div class="columns is-variable is-5">
                                        @for (int j = contactCount; j < divCount; j++)
                                        {
                                            if (j <= contactsArray.Count() - 1)
                                            {
                                                <div class="column is-4">
                                                    <center>
                                                        <div style="border: 1px solid #D6D6CE">
                                                            <div class="m-0" style="background-color:#D6D6CE;">
                                                                <br />
                                                                &nbsp;
                                                            </div>
                                                        </div>
                                                        <div class="m-0 has-background-light">
                                                            <figure class="image is-64x64" style="margin-bottom: -10px">
                                                                @if (contactsArray[j].User.ProfilePicture != null)
                                                                {
                                                                    <img id="profilePicture" class="is-rounded is-64x64" style="margin-top:-30px; padding-bottom:-50px" src="data:image/*;base64,@(Convert.ToBase64String(contactsArray[j].User.ProfilePicture))">
                                                                }
                                                                else
                                                                {
                                                                    <img class="is-rounded is-64x64" style="margin-top:-30px; padding-bottom:-50px" src="https://bulma.io/images/placeholders/128x128.png">
                                                                }
                                                            </figure>
                                                            
                                                            <label class="is-size-7">@Html.DisplayFor(contactItem => contactsArray[j].User.UserName)</label>
                                                        </div>
                                                    </center>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="column is-4">
                                                    &nbsp;
                                                </div>
                                                                                                
                                            }
                                            contactCount++;
                                        }
                                    </div>
                                }
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

